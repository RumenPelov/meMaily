(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,n){e.exports=n(146)},108:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"fetchUser",function(){return S}),n.d(a,"logout",function(){return C}),n.d(a,"handleToken",function(){return D}),n.d(a,"submitSurvey",function(){return F}),n.d(a,"fetchSurveys",function(){return V}),n.d(a,"sortDescSurveys",function(){return A}),n.d(a,"sortAscSurveys",function(){return Y}),n.d(a,"sortYesSurveys",function(){return L}),n.d(a,"deleteSurvey",function(){return I}),n.d(a,"fetchDraft",function(){return R}),n.d(a,"clearDraft",function(){return T});n(106),n(108);var r=n(0),c=n.n(r),s=n(91),o=n.n(s),u=n(6),i=n(8),l=n(93),m=n.n(l),d=n(10),p=n(11),f=n(13),v=n(12),h=n(14),y=n(16),b=n(98),E=n.n(b),g=n(15),j=n.n(g),_=n(23),O=n(27),N=n.n(O),k="fetch_draft",w="init_draft",x=function(e){var t=e.slice(0,16).split("").filter(function(e){return"-"!==e&&"T"!==e&&":"!==e}).join("");return parseInt(t,10)},S=function(e){return function(){var t=Object(_.a)(j.a.mark(function t(n){var a;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("/api/current_user");case 2:(a=t.sent).data._id||e.push("/"),n({type:"fetch_user",payload:a.data});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},C=function(e){return function(){var t=Object(_.a)(j.a.mark(function t(n){var a;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("/api/logout");case 2:a=t.sent,e.push("/"),n({type:"fetch_user",payload:a.data});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},D=function(e){return function(){var t=Object(_.a)(j.a.mark(function t(n){var a;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.post("/api/stripe",e);case 2:a=t.sent,n({type:"fetch_user",payload:a.data});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},F=function(e,t){return function(){var n=Object(_.a)(j.a.mark(function n(a){var r;return j.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.a.post("/api/surveys",e);case 2:r=n.sent,t.push("/surveys"),a({type:"fetch_user",payload:r.data});case 5:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},V=function(){return function(){var e=Object(_.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/surveys");case 2:n=e.sent,t({type:"fetch_surveys",payload:n.data});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},A=function(e){return e.sort(function(e,t){return x(e.dateSent)-x(t.dateSent)}),{type:"fetch_surveys",payload:e}},Y=function(e){return e.sort(function(e,t){return-(x(e.dateSent)-x(t.dateSent))}),{type:"fetch_surveys",payload:e}},L=function(e){return e.sort(function(e,t){return e.yes-t.yes}),{type:"fetch_surveys",payload:e}},I=function(e){return function(){var t=Object(_.a)(j.a.mark(function t(n){var a;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.post("/api/surveys/delete",{id:e});case 2:a=t.sent,n({type:"fetch_surveys",payload:a.data});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},R=function(e){return function(){var t=Object(_.a)(j.a.mark(function t(n){var a,r;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=7;break}return t.next=3,N.a.get("/api/surveys/draft");case 3:a=t.sent,n({type:w,payload:a.data}),t.next=11;break;case 7:return t.next=9,N.a.post("/api/surveys/draft",e);case 9:r=t.sent,n({type:w,payload:r.data});case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(_.a)(j.a.mark(function t(n){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.clear&&n({type:w,payload:{}}),!e.delete){t.next=5;break}return t.next=4,N.a.post("/api/surveys/draft/delete",{});case 4:n({type:w,payload:{}});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},W=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(E.a,{name:"Emaily",description:"5$ for 5 emails use card 4242 4242 4242 4242",amount:500,token:function(t){return e.props.handleToken(t)},stripeKey:"pk_test_fj0Fh1kxVNIXo8KVnx0GFRGv"},c.a.createElement("div",{className:this.props.btnClass},"Add Credits"))}}]),t}(r.Component),G=Object(u.b)(null,a)(W),B=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(v.a)(t).call(this,e))).toggle=function(){n.setState({expand:!n.state.expand})},n.logout=function(){n.props.logout(n.props.history)},n.state={expand:!1},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props.fetchUser(this.props.history)}},{key:"renderContent",value:function(){switch(this.props.auth){case null:return;case!1:return c.a.createElement("li",null,c.a.createElement("a",{href:"/auth/google"},"Login With Google"));default:return[c.a.createElement("li",{key:"1"},c.a.createElement(G,{btnClass:"custom-btn custom-btn--green custom-inline"})),c.a.createElement("li",{key:"3",style:{margin:"0 10px"}},"  Credits: ",this.props.auth.credits," "),c.a.createElement("li",{key:"2"},c.a.createElement("a",{onClick:this.logout,href:"#!"},"Logout"))]}}},{key:"renderDropContent",value:function(){switch(this.props.auth){case null:return;case!1:return c.a.createElement("a",{href:"/auth/google",className:"custom-nav_menu-item"},"Login With Google");default:return[c.a.createElement("button",{key:"1",className:"custom-nav_menu-item",onClick:function(){}},c.a.createElement(G,{btnClass:""})),c.a.createElement("button",{key:"3",className:"custom-nav_menu-item",onClick:function(){}},"Credits: ",this.props.auth.credits," "),c.a.createElement("button",{key:"2",className:"custom-nav_menu-item",onClick:this.logout},"Logout")]}}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("nav",{className:"nav-wrapper deep-orange accent-4"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"custom-nav "},c.a.createElement(y.b,{style:{margin:"0 10px"},to:this.props.auth?"/surveys":"/",className:"custom-nav_logo"},"Emaily"),c.a.createElement("div",{className:"hide-on-med-and-up custom-nav_menu",style:{margin:"0 10px"},onClick:this.toggle},c.a.createElement("svg",{className:"custom-nav_menu-icon"},c.a.createElement("use",{xlinkHref:"sprite.svg#icon-menu"})),c.a.createElement("div",{className:this.state.expand?"custom-nav_menu-content custom-nav_menu-toggle":"custom-nav_menu-content"},this.renderDropContent())),c.a.createElement("ul",{id:"",className:"hide-on-small-and-down"},this.renderContent())))))}}]),t}(r.Component);var U=Object(u.b)(function(e){return{auth:e.auth}},a)(Object(y.d)(B)),z=n(42),H=n.n(z),Z=n(43),$=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"renderContent",value:function(){switch(this.props.auth){case null:return;case!1:return c.a.createElement("div",null,c.a.createElement("h3",null,"Emaily"),c.a.createElement("h6",{className:"custom-line"},"Fast and easy way to collect feedback from your clients"),c.a.createElement("h6",{className:"custom-line"},"Login to start sending surveys"),c.a.createElement("a",{className:"custom-btn  custom-btn--grey  custom-my-20 ",href:"/auth/google"},"Login With Google"));default:return c.a.createElement("div",null,c.a.createElement("h5",{className:"custom-mt-20"}," Welcome to Emaily! "),c.a.createElement("h6",{className:"custom-mt-10 custom-line"},"You are now ready to start collecting feedbacks "),c.a.createElement(y.b,{className:"custom-btn  custom-btn--grey custom-my-20 ",to:this.props.auth?"/surveys":"/"},"Next step \u2192"))}}},{key:"render",value:function(){return c.a.createElement(Z.Flex,{justifyContent:"center"},c.a.createElement(H.a,{bottom:!0},c.a.createElement("div",{className:"custom-landing_card"},this.renderContent())))}}]),t}(r.Component);var q=Object(u.b)(function(e){return{auth:e.auth}})($),J=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"deleteSurvey",value:function(){this.props.deleteSurvey(arguments[0])}},{key:"render",value:function(){var e=this.props.survey;return c.a.createElement("div",{className:"custom-card"},c.a.createElement("div",{className:"custom-card__content"},c.a.createElement("div",{className:"custom-card__content-title"},c.a.createElement("div",{className:"custom-card__content-left"},"Title:"),c.a.createElement("div",{className:"custom-card__content-right custom-text-2"},e.title)),c.a.createElement("div",{className:"custom-card__content-qtn"},c.a.createElement("div",{className:"custom-card__content-left"},"Question:"),c.a.createElement("div",{className:"custom-card__content-right custom-text"},e.body)),c.a.createElement("div",{className:"custom-card__content-subject"},c.a.createElement("div",{className:"custom-card__content-left"},"Subject:"),c.a.createElement("div",{className:"custom-card__content-right"},e.subject)),c.a.createElement("div",{className:"custom-card__content-subject"},c.a.createElement("div",{className:"custom-card__content-left"},"Date sent:"),c.a.createElement("div",{className:"custom-card__content-right"},new Date(e.dateSent).toLocaleDateString()))),c.a.createElement("div",{className:"custom-card__action"},c.a.createElement("div",{className:"custom-card__action-left"},c.a.createElement("div",{className:"custom-card__action-votes"},"YES: ",e.yes),c.a.createElement("div",{className:"custom-card__action-votes"},"NO: ",e.no)),c.a.createElement("button",{className:"custom-card__action-right custom-btn custom-btn--orange-2",onClick:this.deleteSurvey.bind(this,e._id)},"Delete Survey")))}}]),t}(r.Component),K=Object(u.b)(null,a)(J),M=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"renderDropdownItems",value:function(){if(this.props.items)return this.props.items.map(function(e,t){return c.a.createElement("button",{className:"dropdown__content-item",key:t,type:"button",onClick:e.fn},e.text)})}},{key:"render",value:function(){var e=this.props.placeholder;return c.a.createElement("div",{className:"dropdown"},c.a.createElement("div",{className:"dropdown__content"},this.renderDropdownItems()),c.a.createElement("div",{className:"dropdown__btn dropdown__grey"},e))}}]),t}(r.Component),P=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).sortAscSurveys=function(){var e=n.props.surveys.slice();n.props.sortAscSurveys(e)},n.sortDescSurveys=function(){var e=n.props.surveys.slice();n.props.sortDescSurveys(e)},n.sortYesSurveys=function(){var e=n.props.surveys.slice();n.props.sortYesSurveys(e)},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchSurveys()}},{key:"renderSurveyNav",value:function(){var e=[{text:"Date Sent Asc",fn:this.sortAscSurveys},{text:"Date Sent Desc",fn:this.sortDescSurveys},{text:"Yes Response",fn:this.sortYesSurveys}];return this.props.surveys.length?c.a.createElement("div",null,c.a.createElement("div",{className:"custom-group-buttons custom-mt-15"},c.a.createElement("div",null,c.a.createElement("h5",{className:" grey-text text-darken-1 custom-margin-none"},"Active surveys")),c.a.createElement("div",{style:{flex:"1"}}," "),c.a.createElement(y.b,{to:"/surveys/new",className:"custom-btn custom-btn--grey-1"},"New survey"),c.a.createElement(M,{items:e,placeholder:"Sort by"})),c.a.createElement("div",{style:{margin:"20px 0"}},c.a.createElement("hr",null))):c.a.createElement("div",{className:"custom-landing_card"},c.a.createElement("h5",{className:"custom-text custom-mt-20"},"You currently do not have any surveys"),c.a.createElement(y.b,{className:"custom-btn custom-btn--grey custom-my-20 ",to:"/surveys/new"},"Create survey \u2192"))}},{key:"renderSurveys",value:function(){return this.props.surveys.reverse().map(function(e){return c.a.createElement(K,{key:e._id,survey:e})})}},{key:"render",value:function(){var e=this.props.surveys.length;return c.a.createElement(Z.Flex,{justifyContent:"center"},c.a.createElement(H.a,{bottom:!0},c.a.createElement("div",{className:e?"custom-survey_card custom-mt-40":"custom-pos-relative "},this.renderSurveyNav(),this.renderSurveys())))}}]),t}(r.Component);var Q=Object(u.b)(function(e){return{surveys:e.surveys}},a)(P),X=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"renderContent",value:function(){switch(this.props.auth){case null:case!1:return;default:return c.a.createElement("div",null,c.a.createElement(Q,null),c.a.createElement("div",{className:"fixed-action-btn"},c.a.createElement(y.b,{to:"/surveys/new",className:"btn-floating btn-large red"},c.a.createElement("i",{className:" material-icons"},"add"))))}}},{key:"render",value:function(){return c.a.createElement("div",null,this.renderContent())}}]),t}(r.Component);var ee=Object(u.b)(function(e){return{auth:e.auth}})(X),te=n(148),ne=n(53),ae=n.n(ne),re=n(149),ce=function(e){var t=e.input,n=e.label,a=e.placeHolder,r=e.meta,s=r.error,o=r.touched;return c.a.createElement("div",null,c.a.createElement("label",null,n),c.a.createElement("input",Object.assign({},t,{style:{marginBottom:"5px"},placeholder:a})),c.a.createElement("div",{className:"red-text",style:{marginBottom:"20px"}},o&&s))},se=/^[a-zA-Z0-9.!#$%&\u2019*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,oe=function(e,t){var n=e.split(",").map(function(e){return e.trim()}).filter(function(e){return!1===se.test(e)});return""===n[n.length-1]&&n.pop(),n.length&&"from"!==t?"These emails are invalid: ".concat(n):n.length&&"from"===t?"This email is invalid: ".concat(n):void 0},ue=[{label:"Survey Title",name:"title"},{label:"Subject Line",name:"subject"},{label:"Email Body",name:"body"},{label:"Recipients Emails",name:"recipients"},{label:"From",name:"from"}],ie=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"saveDraft",value:function(){if(this.props.formValues){var e=this.props.formValues,t={title:e.title,subject:e.subject,body:e.body,recipients:e.recipients,from:e.from};this.props.fetchDraft(t)}}},{key:"renderFields",value:function(){return ae.a.map(ue,function(e){var t=e.label,n=e.name,a="";return"from"===n&&(a="Leave blank for no-reply@emaily.com or enter your email"),c.a.createElement(re.a,{key:n,label:t,type:"text",name:n,placeHolder:a,component:ce})})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:this.props.handleSubmit(this.props.onSurveySubmit)},this.renderFields(),c.a.createElement("div",{className:"custom-group-buttons custom-mt-30 custom-mb-20"},c.a.createElement(y.b,{to:"/surveys",className:"custom-btn custom-btn--red custom-align-center"},"Cancel"),c.a.createElement("button",{className:"custom-btn custom-btn--green-2 custom-align-center",onClick:this.saveDraft.bind(this)},c.a.createElement("span",null,"Save Draft"),c.a.createElement("i",{className:"material-icons right custom-icon"},"backup")),c.a.createElement("button",{type:"submit",className:"custom-btn custom-btn--green-2 "},"Next \u2192"))))}}]),t}(r.Component);ie=Object(te.a)({validate:function(e){var t={};return t.recipients=oe(e.recipients||""),ae.a.each(ue,function(n){var a=n.name;e[a]||"from"===a||(t[a]="You must provide ".concat(a)),e[a]&&"from"===a&&(t[a]=oe(e[a],a))}),t},form:"surveyForm",destroyOnUnmount:!1})(ie);var le=ie=Object(u.b)(function(e){return e.form.surveyForm?{initialValues:e.formInit,formValues:e.form.surveyForm.values}:{initialValues:e.formInit}},{fetchDraft:R})(ie);var me=Object(u.b)(function(e){return{formValues:e.form.surveyForm.values,credits:e.auth.credits}},a)(Object(y.d)(function(e){var t=e.onCancel,n=e.formValues,a=e.submitSurvey,r=e.clearDraft,s=e.history,o=e.credits,u=ae.a.map(ue,function(e){var t=e.name,a=e.label;return c.a.createElement("div",{key:t},c.a.createElement("label",null,a),c.a.createElement("div",null,"from"!==t?n[t]:n[t]?n[t]:"no-reply@emaily.com"))}),i=function(){var e=Object(_.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o>0)){e.next=6;break}return e.next=3,a(n,s);case 3:r({delete:!0}),e.next=7;break;case 6:window.alert("You need credits");case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement("h5",null,"Please confirm your entries"),c.a.createElement("div",null,u),c.a.createElement("div",{className:"custom-mt-30 custom-mb-20 custom-group-buttons"},c.a.createElement("button",{className:" custom-btn  custom-btn--orange",onClick:t}," \u2190 Back"),function(){if(0===o)return c.a.createElement("div",{className:"custom-alarm-text"},"You have 0 credits left!")}(),c.a.createElement("button",{disabled:0===o,className:" custom-btn custom-btn--green-2 custom-align-center",onClick:i},c.a.createElement("span",null,"Send Survey"),c.a.createElement("i",{className:"material-icons right custom-icon"},"email"))))})),de=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={showFormReview:!1},n.props.fetchDraft(),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this.props.clearDraft({clear:!0})}},{key:"renderContent",value:function(){var e=this;if(this.props.DraftValues._id||this.props.DraftValues.noDraft)return this.state.showFormReview?c.a.createElement(me,{onCancel:function(){return e.setState({showFormReview:!1})}}):c.a.createElement(le,{onSurveySubmit:function(){return e.setState({showFormReview:!0})}})}},{key:"render",value:function(){return c.a.createElement(Z.Flex,{justifyContent:"center"},c.a.createElement(H.a,{top:!0},c.a.createElement("div",{className:"custom-survey_card custom-mt-20"},this.renderContent())))}}]),t}(r.Component);de=Object(te.a)({form:"surveyForm"})(de);var pe=de=Object(u.b)(function(e){return{DraftValues:e.formInit}},{fetchDraft:R,clearDraft:T})(de),fe=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return c.a.createElement(y.a,null,c.a.createElement("div",null,c.a.createElement(U,null),c.a.createElement("div",{className:"custom-image"},c.a.createElement("div",{className:"container"},c.a.createElement(y.c,{exact:!0,path:"/",component:q}),c.a.createElement(y.c,{exact:!0,path:"/surveys",component:ee}),c.a.createElement(y.c,{path:"/surveys/new",component:pe})))))}}]),t}(r.Component),ve=n(150);var he=Object(i.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_user":return t.payload||!1;default:return e}},form:ve.a,surveys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_surveys":return t.payload;default:return e}},draft:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return t.payload;default:return e}},formInit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return t.payload;default:return e}}}),ye=Object(i.d)(he,{},Object(i.a)(m.a));o.a.render(c.a.createElement(u.a,{store:ye},c.a.createElement(fe,null)),document.querySelector("#root"))}},[[105,2,1]]]);
//# sourceMappingURL=main.c155e052.chunk.js.map